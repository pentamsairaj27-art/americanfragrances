<!DOCTYPE html>
<html>
<head>
     <title>Perfumes with AI and Super Sale</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="Images/favicon.png" />
    <!-- Google fonts-->
   <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <!-- Bootstrap links -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link href="Css/StyleSheet.css" rel="stylesheet" />
    <link href="Css/cart.css" rel="stylesheet" />
    <link href="Css/dropdown.css" rel="stylesheet" />
    <!-- FontAwesome CSS - loading as last, so it doesn't block rendering-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
        .txt_sm .cart_count {
            font-size: 1rem;
            color: #1fc6c2;
        }
        .btn{
            line-height: 10px;
        }
       
    </style>
</head>
<body>
    <div id="preloader" style="position: fixed; width: 100%; height: 100%; background: #fff; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 9999;">
        <div class="progress" style="width: 50%; height: 2px; margin-bottom: 10px;">
            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%; background-color: #70b4bd;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <div class="loading-text" style="color: #70b4bd; font-family: 'Poppins', sans-serif;">Loading...</div>
    </div>
    <div id="validationdiv" class="validation_message"></div>
    <div id="dvtopnav"></div>
    <div class="dvnavcust"></div>

    <!--giftVocherModal-->
    <div class="modal fade" id="giftvocherLogin" role="dialog"></div>
    <div class="container">
        <div class="row pt-5 mb-30">
            <div class="text-center">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb justify-content-center mb-0 px-0">
                        <li class="breadcrumb-item"><a class="text-dark" href="home.html">Home</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Shipping Address</li>
                    </ol>
                </nav>
            </div>
        </div>
        <div id="statusbar"> <span class="sr-only">checkout progress</span> <div class="first status signin arrow "> <p><span>1</span>Sign In</p> </div> <div class="status address arrow active"> <i class="bordertri"></i> <i class="tri"></i> <p role="heading" aria-level="1"><span class="sr-only">current step</span><span>2</span>Address Information</p> </div> <div class="status ship arrow prevActive "> <i class="bordertri"></i> <i class="tri"></i> <p><span>3</span>Shipping Options</p> </div> <div class="status payment arrow"> <i class="bordertri"></i> <i class="tri"></i> <p><span>4</span>Payment &amp; Order Summary</p> </div> <div class="status ordercom last"> <i class="bordertri"></i> <i class="tri"></i> <p><span>5</span>Order Complete</p> </div> </div>
        <!-----------------------------------------------Add address Start----------------------------------------------------------->
        <div class="container p-0 mb-5">
            <div class="row mt-5">
                <!--<div class="col-md-6">
        <form id="Add_Address" onsubmit="return false" method="POST" role="form">

            <div class="Editprofile_div">
                <div class="floating-form">
                    <div class="row">
                        <div class="col-md-12">
                            <label class="form-label" for="fname">First Name </label>
                            <input class=" form-control" id="fname" type="text" placeholder="Name" required />

                        </div>
                        <div class="col-md-12">
                            <label class="form-label" for="lname">Last Name </label>
                            <input class=" form-control" id="lname" type="text" placeholder="Name" required />

                        </div>
                        <div class="col-md-12">
                            <label class="form-label" for="addline1">Address Line 1 </label>
                            <input class=" form-control" id="addline1" type="text" placeholder="Address Line 1" required />

                        </div>
                        <div class="col-md-12">
                            <label class="form-label" for="addline2">Address Line 2 </label>
                            <input class=" form-control" id="addline2" type="text" placeholder="Address Line 2" />

                        </div>
                        <div class="col-md-12">
                            <label class="form-label" for="txtpincode">Postal / Zip Code </label>
                            <input class=" form-control" id="txtpincode" type="number" pattern="/^-?\d+\.?\d*$/" min="6" placeholder="Postal / Zip Code" onKeyPress="if(this.value.length==6) return false;" required />
                        </div>
                        <div class="col-md-12">
                            <label class="form-label" for="City">City </label>
                            <input class=" form-control" id="City" type="text" placeholder="City" />

                        </div>
                        <div class="col-md-12">
                            <label class="form-label" for="State">State </label>
                            <input class=" form-control" id="State" type="text" placeholder="State" />

                        </div>
                        <div class="col-md-12">
                            <label class="form-label" for="Country">Country </label>
                            <input class=" form-control" id="Country" type="text" placeholder="Country" />

                        </div>
                        <div class="col-md-12">
                            <label class="form-label" for="txtphone">Contact Number </label>
                            <input class=" form-control" id="txtphone" type="tel" placeholder="" />

                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-4">
                            <button type="button" class="btn " onclick="window.location='cart.html'">Back</button>
                        </div>
                        <div class="col-md-4"></div>
                        <div class="col-md-4 d-flex justify-content-end">
                            <button type="submit" class="btn button-cart">Save</button>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-6 d-block d-md-none">
                        <button type="submit" class="btn button_md">Update</button>
                    </div>
                    <div class="col-6 d-block d-md-none">
                        <span type="submit" class="btn btncancels" id="addcnl">Cancel</span>
                    </div>
                </div>
            </div>
            <br /><br />
        </form>

    </div>-->
                <div class="col-md-9">

                    <!-----------------------------------------------Empty address Start----------------------------------------------------------->
                    <!-----------------------------------------------Add address Start----------------------------------------------------------->
                    <div class="Myprofile_bodydv" id="address_list">
                        <div id="yaab-alert-box" class="a-box a-alert a-alert-success a-spacing-small" style="display:none;"><div class="a-box-inner a-alert-container"><h4 class="a-alert-heading"><i class="fa fa-check"></i><span>&nbsp;&nbsp;</span>Shipping address changed</h4><div class="a-alert-content"></div></div></div>

                        <br />
                        <div class="row" id="Address_list">
                            <div class="col-md-4 p-0 d-grid align-content-center justify-content-center" style=" background-color: #F7F7F7; border-radius:8px; height:275px;">
                                <div class="addressbox ">
                                    <img src="Images/material-symbols_add-location-rounded.png" class="img-fluid m-auto d-flex" /><br />
                                    <span class="btn lbl_edit" id="btn_add_address">Add New Address</span>
                                </div>
                            </div>
                        </div>

                    </div>

                    <!-----------------------------------------------Add address Start----------------------------------------------------------->
                    <div class="Myprofile_bodydv" id="add_address" style="display:none;">
                        <form id="Add_Address" onsubmit="return false" method="POST" role="form">
                            <div class="row">


                                <div class="col-md-12 d-flex justify-content-end">
                                    <span class="btn btncancels btn_transparent" id="addcnl">&Chi;</span>
                                </div>

                            </div>

                            <div class="Editprofile_div">
                                <div class="floating-form">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label class="form-label" for="fname">First Name </label>
                                            <input class=" form-control" id="fname" type="text" placeholder="Name" required />

                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label" for="lname">Last Name </label>
                                            <input class=" form-control" id="lname" type="text" placeholder="Name" required />

                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label" for="addline1">Address Line 1 </label>
                                            <input class=" form-control" id="addline1" type="text" placeholder="Address Line 1" required />
                                            <div id="map" style="display:none;max-width:880px"></div>
                                        </div>

                                        <div class="col-md-6">
                                            <label class="form-label" for="City">City </label>
                                            <input class=" form-control" id="City" type="text" placeholder="City" required />

                                        </div>
                                        <div class="col-md-4">
                                            <label class="form-label" for="State">State </label>
                                            <input class=" form-control" id="State" type="text" placeholder="State" required />
                                            <!--<select class="form-select dropdownStyle" id="State" required>
                                    <option value="">Select a state</option>

                                </select>-->

                                        </div>
                                        <div class="col-md-4">
                                            <label class="form-label" for="txtpincode">Postal / Zip Code </label>
                                            <input class=" form-control" id="txtpincode" type="number" pattern="/^-?\d+\.?\d*$/" min="6" placeholder="Postal / Zip Code" onKeyPress="if(this.value.length==6) return false;" required />
                                        </div>
                                        <div class="col-md-4">
                                            <label class="form-label" for="Country">Country </label>
                                            <input class=" form-control" id="Country" type="text" placeholder="Country" value="USA" required />

                                        </div>
                                        <div class="col-md-4">
                                            <label class="form-label" for="txtphone">Phone Number </label>
                                            <input class=" form-control" id="txtphone" type="text" placeholder="" required />

                                        </div>
                                        <div class="col-md-6 form-check d-flex align-items-center p-0 ps-3 mt-2">
                                            <input class="form-check-input ms-0 me-2" type="checkbox" id="default" name="default" checked>
                                            <label class="form-check-label"> MARK AS SHIPPING ADDRESS</label>
                                        </div>
                                    </div>
                                    <div class="row">

                                        <div class="col-md-4 offset-md-8 d-flex justify-content-end">
                                            <button type="submit" class="btn button-cart">Save</button>
                                        </div>
                                    </div>
                                </div>
                                <!--<div class="row">
                        <div class="col-6 d-block d-md-none">
                            <button type="submit" class="btn button_md">Update</button>
                        </div>
                        <div class="col-6 d-block d-md-none">
                            <span type="submit" class="btn btncancels" id="addcnl">Cancel</span>
                        </div>
                    </div>-->
                            </div>
                            <br /><br />
                        </form>
                    </div>

                    <!-----------------------------------------------Edit address Start----------------------------------------------------------->
                    <div class="Myprofile_bodydv" id="edit_address" style="display:none;">
                        <form onsubmit="return false" id="Edit_Address" role="form">
                            <input type="hidden" name="hiddenid" id="hiddenid" />
                            <div class="row">

                                <div class="col-md-12 d-flex justify-content-end">
                                    <span class="btn btncancels btn_transparent" id="editcnl" type="button">&Chi;</span>
                                </div>
                                <!--<div class="col-md-2 d-none d-md-block">
                        <span class="btn btncancels" id="editcnl">Cancel</span>
                    </div>-->
                            </div>

                            <div class="Editprofile_div">
                                <div class="floating-form">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label class="form-label" for="edit_fname">First Name </label>
                                            <input class=" form-control" id="edit_fname" type="text" placeholder="Name" required />

                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label" for="edit_lname">Last Name </label>
                                            <input class=" form-control" id="edit_lname" type="text" placeholder="Name" required />

                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label" for="edit_addline1">Address Line 1 </label>
                                            <input class=" form-control" id="edit_addline1" type="text" placeholder="Address Line 1" required />
                                            <div id="map1" style="display:none;max-width:880px"></div>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label" for="edit_addline2">Address Line 2 </label>
                                            <input class=" form-control" id="edit_addline2" type="text" placeholder="Address Line 2" required />

                                        </div>

                                        <div class="col-md-6">
                                            <label class="form-label" for="edit_City">City </label>
                                            <input class=" form-control" id="edit_City" type="text" placeholder="City" required />

                                        </div>
                                        <div class="col-md-4">
                                            <label class="form-label" for="edit_State">State </label>
                                            <input class=" form-control" id="edit_State" type="text" placeholder="State" required />
                                            <!--<select class="form-select dropdownStyle" id="edit_State" required>
                                    <option value="">Select a state</option>
                                </select>-->

                                        </div>
                                        <div class="col-md-4">
                                            <label class="form-label" for="edit_pincode">Postal / Zip Code </label>
                                            <input class=" form-control" id="edit_pincode" type="number" pattern="/^-?\d+\.?\d*$/" min="6" placeholder="Postal / Zip Code" onKeyPress="if(this.value.length==6) return false;" required />
                                        </div>
                                        <div class="col-md-4">
                                            <label class="form-label" for="edit_country">Country </label>
                                            <input class=" form-control" id="edit_country" type="text" placeholder="Country" required />

                                        </div>
                                        <div class="col-md-4">
                                            <label class="form-label" for="edit_phone">Phone Number </label>
                                            <input class=" form-control" id="edit_phone" type="text" placeholder="+91" required />

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-2 d-none d-md-block mt-5">
                                    <button class="btn button-cart" style="padding: 11px 20px !important;">Update</button>
                                </div>
                            </div>
                            <br /><br />
                        </form>
                    </div>
                </div>
                <div class="col-md-3" style="justify-items: center;">
                    <div id="rightcol">
                        <div class="card mb-4">
                            <div class="card-header p-3">
                                <a>Select a Shipping Method</a>
                            </div>
                            <div class="card-body p-3">
                                <div class="d-flex justify-content-between align-items-baseline">
                                    <div>ITEMS SUBTOTAL:</div>
                                    <div>
                                        <p class="cart-titles grand-price  bag_total " id="total_cart_amount">$<span class="cart_tot"></span></p>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <hr />

                        <h6><i class="fa-solid fa-lock"></i>SAFE & SECURE CHECKOUT</h6>
                        <p>
                            Trusted online since 1997<br />
                            Over 30 million orders shipped<br />
                            Over $3 billion in beauty products sold<br />
                        </p>
                        <hr />
                        <p>
                            30 DAY RETURN POLICY
                            <a>Free and Easy Returns.</a>
                        </p>
                        <hr />
                        <p>PRIVACY POLICY & TERMS OF USE <a>Privacy Policy</a> and <a>Terms of Use</a>.</p>
                        <hr />
                    </div>
                    <div class="">
                        <a role="button" id="shipping" class="btn button-cart" style="padding: 11px 20px !important;">Next</a>
                    </div>
                    <div class="px-4 py-2 mt-3" style="background: #70b4bd;">
                        <h6 class="text-center m-0">
                            EARN REWARD POINTS FOR EACH PURCHASE TO UNLOCK SPECIAL DEALS AND COUPONS
                        </h6>
                    </div>
                </div>
               
            </div>
        </div>

    </div>


    <a href="#" class="back-to-top"><i class="fa fa-chevron-up"></i></a>
    <!-----------------------------------------------Footer End----------------------------------------------------------->
    <input type="hidden" id="total_cart_amount" />
    <footer id="footer">
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.iconify.design/1/1.0.7/iconify.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC7Kr-fzUFv11EqOJrbfxvLi09Akh_kvAo&libraries=drawing,places&callback=initMap" defer="defer"></script>
    <script src="Js/Navbar.js"></script>
    <script src="Js/Global.js"></script>
    <script src="Js/Address.js"></script>
    <script src="Js/customer_Login.js"></script>
    <script src="Js/cart_page.js"></script>
    <script>
        let map1, map2;

        function initMap() {
            map1 = initializeMap('map', 'addline1', 'location1');
            map2 = initializeMap('map1', 'edit_addline1', 'location2');
        }

        function initializeMap(mapId, inputId, storagePrefix) {
            const map = new google.maps.Map(document.getElementById(mapId), {
                center: { lat: -33.8688, lng: 151.2195 },
                zoom: 5
            });

            const input = document.getElementById(inputId);
            map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

            const autocomplete = new google.maps.places.Autocomplete(input);
            autocomplete.bindTo('bounds', map);

            const infowindow = new google.maps.InfoWindow();
            const marker = new google.maps.Marker({
                map: map,
                anchorPoint: new google.maps.Point(0, -29)
            });

            autocomplete.addListener('place_changed', function () {
                infowindow.close();
                marker.setVisible(false);
                const place = autocomplete.getPlace();

                if (!place.geometry) {
                    window.alert("Please select a valid location.");
                    return;
                }

                let latitude = place.geometry.location.lat();
                let longitude = place.geometry.location.lng();
                let city = '';
                let state = '';
                let pincode = '';
                let country = '';
                let address = place.formatted_address;

                if (place.address_components) {
                    place.address_components.forEach(component => {
                        const types = component.types;
                        if (types.includes('locality')) {
                            city = component.long_name;
                        }
                        if (types.includes('administrative_area_level_1')) {
                            state = component.long_name;
                        }
                        if (types.includes('postal_code')) {
                            pincode = component.long_name;
                        }
                        if (types.includes('country')) {
                            country = component.long_name;
                        }
                    });
                }

                if (place.geometry.viewport) {
                    map.fitBounds(place.geometry.viewport);
                } else {
                    map.setCenter(place.geometry.location);
                    map.setZoom(17);
                }

                marker.setPosition(place.geometry.location);
                marker.setVisible(true);

                infowindow.setContent('<div><strong>' + place.name + '</strong><br>' + place.formatted_address);
                infowindow.open(map, marker);

                // Save to localStorage (optional)
                localStorage.setItem('sear_latitude', latitude);
                localStorage.setItem('sear_longitude', longitude);
                localStorage.setItem('sear_address', address);
                localStorage.setItem(`${storagePrefix}_city`, city);
                localStorage.setItem(`${storagePrefix}_state`, state);
                localStorage.setItem(`${storagePrefix}_pincode`, pincode);
                localStorage.setItem(`${storagePrefix}_country`, country);

                // Auto-fill corresponding fields
                if (inputId === 'addline1') {
                    document.getElementById('City').value = city;
                    document.getElementById('State').value = state;
                    document.getElementById('txtpincode').value = pincode;
                    document.getElementById('Country').value = country;
                } else if (inputId === 'edit_addline1') {
                    document.getElementById('edit_City').value = city;
                    document.getElementById('edit_State').value = state;
                    document.getElementById('edit_pincode').value = pincode;
                    document.getElementById('edit_country').value = country;
                }

                console.log(`Saved Data for ${storagePrefix}:`, {
                    latitude, longitude, city, state, pincode, country, address
                });
            });

            input.addEventListener('input', function () {
                const mapContainer = document.getElementById(mapId);
                mapContainer.style.display = this.value.length > 0 ? 'block' : 'none';
            });

            return map;
        }

    </script>




</body>
</html>