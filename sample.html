<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>FOOD KAKAA</title>
    <link rel="shortcut icon" type="image/png" href="../../Images/logo.png" />

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.21/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css"
          href="https://cdn.rawgit.com/tonystar/bootstrap-float-label/v4.0.1/dist/bootstrap-float-label.min.css" />
    <link href="../Css/Admin.css" rel="stylesheet" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://code.iconify.design/1/1.0.7/iconify.min.js"></script>


    <script type="text/javascript" src="https://canvasjs.com/assets/script/jquery.canvasjs.min.js"></script>
</head>

<body>
    <div id="preloader" style="position: fixed; width: 100%; height: 100%; background: #fff; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 9999;">
        <div class="progress" style="width: 50%; height: 2px; margin-bottom: 10px;">
            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%; background-color: #70b4bd;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <div class="loading-text" style="color: #70b4bd; font-family: 'Poppins', sans-serif;">Loading...</div>
    </div>
    <div class="dvnav"></div>
    <!--giftVocherModal-->
    <div class="modal fade" id="giftvocherLogin" role="dialog"></div>

    <!-----------------------------------------------body starts----------------------------------------------------------->
    <div class="container-fluid main_dv">
        <div class="row justify-content-end">
            <!-----------------------------------------------Dashboard starts----------------------------------------------------------->
            <div class="col-md-2 dashboard_dv">
                <div id="leftmenu" class="dashboard_Menu">

                </div>
            </div>
            <!-----------------------------------------------Body dv starts----------------------------------------------------------->
            <div class="col-md-10 content-wrapper">
                <div class="row ml-2" style="display: flex;justify-content: space-between;">
                    <div class="col-md-5 dashboard_box m-2">

                        <div class="row d-flex justify-content-center ml-2">
                            <div class="row">
                                <div class="col-md-4.5 pr-2">
                                    <label for="fromData">From:</label> <input class="form-control" type="date"
                                                                               id="fromDate" style="width: 130px; font-size:12px!important;">
                                </div>
                                <div class="col-md-4.5">
                                    <label for="todate">To:</label> <input class="form-control"
                                                                           type="date" id="todate" style="width: 130px; font-size: 12px !important;">
                                </div>
                                <div class="col-md-2">
                                    <br /><button class="btn btn-danger" style="margin-top:3px"
                                                  id="dateFilter">
                                        Submit
                                    </button>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="col-md-3 dashboard_box m-2">

                        <div class="row">
                            <div class="col-md-4">
                                <div class="dashbd_circle">
                                    <span class="iconify dashbd_circle_icons" data-icon="tabler:currency-rupee"
                                          data-inline="false"></span>
                                </div>
                            </div>
                            <div class="col-md-8" id="EmpRevList">
                                <h5 class="dashbd_circle_heading" id="categorycount"></h5>
                                <p class="dashbd_circle_txt">Total Revenue</p>
                            </div>
                        </div>

                    </div>
                    <div class="col-md-3 dashboard_box m-2" id="adminProfit">

                        <div class="row">
                            <div class="col-md-4">
                                <div class="dashbd_circle">
                                    <span class="iconify dashbd_circle_icons" data-icon="tabler:currency-rupee"
                                          data-inline="false"></span>
                                </div>
                            </div>
                            <div class="col-md-8" id="EmpRevList">
                                <h5 class="dashbd_circle_heading" id="totalProfit"></h5>
                                <p class="dashbd_circle_txt">Total Profit</p>
                            </div>
                        </div>

                    </div>
                </div>
                <br>

                <div class="row ml-3">
                    <div class="col-md-3 p-0" id="admingst">
                        <div class="dashboard_box">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="dashbd_circle">
                                        <span class="iconify dashbd_circle_icons" data-icon="tabler:currency-rupee"
                                              data-inline="false"></span>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <h5 class="dashbd_circle_heading" id="totalgst"></h5>
                                    <p class="dashbd_circle_txt">Total GST</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 p-0">
                        <div class="dashboard_box">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="dashbd_circle">
                                        <span class="iconify dashbd_circle_icons" data-icon="bi:person-fill"
                                              data-inline="false"></span>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <h5 class="dashbd_circle_heading" id="customercount"></h5>
                                    <p class="dashbd_circle_txt">Total customers</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 p-0" id="AdminTotal">
                        <div class="dashboard_box">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="dashbd_circle">
                                        <span class="iconify dashbd_circle_icons"
                                              data-icon="icon-park-outline:ad-product" data-inline="false"></span>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <h5 class="dashbd_circle_heading" id="productcount"></h5>
                                    <p class="dashbd_circle_txt">Total Products</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 p-0" id="EmpDel">
                        <div class="dashboard_box">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="dashbd_circle">
                                        <span class="iconify dashbd_circle_icons" data-icon="tabler:currency-rupee"
                                              data-inline="false"></span>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <h5 class="dashbd_circle_heading" id="deliverycount"></h5>
                                    <p class="dashbd_circle_txt text-sm"> Delivery Charges</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 p-0" id="EmpGST">

                        <div class="dashboard_box">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="dashbd_circle">
                                        <span class="iconify dashbd_circle_icons" data-icon="tabler:currency-rupee"
                                              data-inline="false"></span>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <h5 class="dashbd_circle_heading" id="GSTcount"></h5>
                                    <p class="dashbd_circle_txt text-sm"> Total GST</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 p-0">
                        <div class="dashboard_box">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="dashbd_circle">
                                        <span class="iconify dashbd_circle_icons" data-icon="ic:round-shopping-cart"
                                              data-inline="false"></span>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <h5 class="dashbd_circle_heading" id="ordercount"></h5>
                                    <p class="dashbd_circle_txt">Total Orders</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br />
                <div class="row container">
                    <div class="col-md-12 content-body">
                        <div class="row">
                            <div class="col-md-10">
                                <h4 class="Menu_Title">SALES REPORT</h4>
                                <div id="chartContainer" style="height: 370px; width: 100%;"></div>

                            </div>

                        </div>
                        <br />
                    </div>

                </div>
                <br><br>
                <div class="row paymentHis">
                    <div class="col-md-3">
                        <div class="dashboard_box">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="dashbd_circle">
                                        <span class="iconify dashbd_circle_icons" data-icon="tabler:currency-rupee"
                                              data-inline="false"></span>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <h5 class="dashbd_circle_heading" id="amtSet"></h5>
                                    <p class="dashbd_circle_txt">Amount Settled</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3" id="AdminTotal">
                        <div class="dashboard_box">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="dashbd_circle">
                                        <span class="iconify dashbd_circle_icons" data-icon="tabler:currency-rupee"
                                              data-inline="false"></span>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <h5 class="dashbd_circle_heading" id="pendAmu"></h5>
                                    <p class="dashbd_circle_txt">Pending Amount</p>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>



        <!-- +++++++++++ HISTORY +++++++++++++++ -->

        <div class="modal fade  bd-example-modal-lg" id="historyModal" tabindex="-1" role="dialog"
             aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLongTitle">Transaction History</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <table id="historm_tbl" class="table table-responsive-sm table-bordered table-sm" cellspacing="0"
                               width="100%">
                            <thead>
                                <tr>
                                    <th>Amount Payable</th>
                                    <th>Amount Paid</th>
                                    <th>Payment Method</th>
                                    <th>Transaction Id</th>
                                    <th>Comment</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <img class="loading img" width="60%"
         style="position:absolute;left:0px;top:100px;right:0px;margin:0px auto!important;z-index:100000000000000000;"
         alt="Loader" src="../Images/loader.gif" />

    <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>

    <script src="../../Js/Global.js"></script>
    <script src="../Js/AdminDashboard.js"></script>
    <script>
        $(document).ready(function () {
            $('#historm_tbl').DataTable();
            $('.dataTables_length').addClass('bs-select');
        });
    </script>
    <script>
        $(document).ready(function () {
            $(".loading").show();
            var Project_Id = GlobalInputs();
            Navbar();
            var ProjectAuth = localStorage.getItem("Admin_auth");
            var dataPointanswers = [];
            $('#EmpDel').hide();
            $("#EmpGST").hide();
            $(".paymentHis").hide();
            if (ProjectAuth == "3c53d65e-da3a-478a-a372-135a0caad4ff") {
                var today = new Date();
                var dateonly = today.getDate();
                var m = today.getMonth() + 1;
                var y = today.getFullYear();
                var todate = dateonly + "/" + m + "/" + y;
                var priorDate = new Date(new Date().setDate(today.getDate() - 30));
                var pday = priorDate.getDate();
                var pm = priorDate.getMonth() + 1;
                var py = priorDate.getFullYear();
                var pydate = pday + "/" + pm + "/" + py;
                $.ajax({
                    url: "https://foodkakaapi.annamrajus.com/Order/DaywiseAmount?project_id=" + Project_Id + "&&from=" + pydate + "&&to=" + todate + "",
                    type: "GET",
                    dataType: "JSON",
                    async: false,
                    crossDomain: true,
                    success: function (data) {
                        for (var i = 0; i < data.length; i++) {
                            var nowDate = new Date(parseInt(data[i].createdon.substr(6)));
                            var result = "";
                            result = nowDate.toString("dd/mm/yyyy");
                            dataPointanswers.push({
                                x: new Date(result),
                                y: data[i].amount
                            });
                        }
                        var options = {
                            title: {
                                text: "Spline Chart with Export as Image"
                            },
                            axisX: {
                                labelFormatter: function (e) {
                                    return CanvasJS.formatDate(e.value, "DD MMM");
                                },
                            },
                            animationEnabled: true,
                            exportEnabled: true,
                            data: [
                                {
                                    type: "spline", //change it to line, area, column, pie, etc
                                    dataPoints: dataPointanswers
                                }
                            ]
                        };
                        $("#chartContainer").CanvasJSChart(options);
                    }
                });

                $("#EmpRevList").click(function () {
                    window.location.href = '../Admin/AdminDashboard.html'
                })
            } else {
                $("#AdminTotal").hide();
                $('#EmpDel').show();
                $("#EmpGST").show();
                $(".paymentHis").show();
                $("#adminProfit").hide();
                $("#admingst").hide();
                $.ajax({
                    url: "https://foodkakaapi.annamrajus.com/Order/DaywiseAmount?project_id=" + Project_Id + "&authorid=" + ProjectAuth,
                    type: "GET",
                    dataType: "JSON",
                    async: false,
                    crossDomain: true,
                    success: function (data) {
                        for (var i = 0; i < data.length; i++) {
                            var nowDate = new Date(parseInt(data[i].createdon.substr(6)));
                            var result = "";
                            result = nowDate.toString("dd/mm/yyyy");
                            dataPointanswers.push({
                                x: new Date(result),
                                y: data[i].amount
                            });
                        }
                        var options = {
                            title: {
                                text: "Spline Chart with Export as Image"
                            },
                            axisX: {
                                labelFormatter: function (e) {
                                    return CanvasJS.formatDate(e.value, "DD MMM");
                                },
                            },
                            animationEnabled: true,
                            exportEnabled: true,
                            data: [
                                {
                                    type: "spline", //change it to line, area, column, pie, etc
                                    dataPoints: dataPointanswers
                                }
                            ]
                        };
                        $("#chartContainer").CanvasJSChart(options);
                    }
                });
                $("#EmpRevList").click(function () {
                    window.location.href = '../../Employee/EmployeeRevenu.html';

                });

                $.ajax({
                    url: "https://foodkakaapi.annamrajus.com/Analytics/Employeeareacommission?project_id=" + Project_Id + "&authorid=" + ProjectAuth,
                    type: "GET",
                    dataType: "JSON",
                    async: true,
                    crossDomain: true,
                    success: function (data) {
                        $("#vendorListTbl tbody").empty();
                        $.each(data, function (index, value) {
                            var newRow = '<tr><td>' + value.bill_id + '</td><td>' + value.vendorname + '</td><td>' + value.amount + '</td><td>' + value.delivery_charge + '</td><td>' + value.gst_amount + '</td><td>' + value.customername + '</td></tr>';

                            $("#vendorListTbl tbody").append(newRow);
                        })

                    }
                })


                $.ajax({
                    url: "https://foodkakaapi.annamrajus.com/Analytics/Employeedelivarycharges?project_id=" + Project_Id + "&authorid=" + ProjectAuth,
                    type: "GET",
                    dataType: "JSON",
                    async: true,
                    crossDomain: true,
                    success: function (data) {
                        $("#deliverycount").html(data);

                    }
                });


                $.ajax({
                    url: "https://foodkakaapi.annamrajus.com/Analytics/Employeegst?project_id=" + Project_Id + "&authorid=" + ProjectAuth,
                    type: "GET",
                    dataType: "JSON",
                    async: true,
                    crossDomain: true,
                    success: function (data) {
                        $("#GSTcount").html(data);

                    }
                });
                let admin_auth = "3c53d65e-da3a-478a-a372-135a0caad4ff";
                $.ajax({
                    url: "https://foodkakaapi.annamrajus.com/Redeem/Remainingamount?project_id=" + Project_Id + "&authorid=" + admin_auth + "&id=" + ProjectAuth,
                    type: "GET",
                    dataType: "JSON",
                    async: true,
                    crossDomain: true,
                    success: function (data) {
                        $("#amtSet").html(data.paidamount);
                        $("#pendAmu").html(data.Remainingamount);
                    }
                });

                $("#amtSet").click(function () {
                    $("#historyModal").modal("show");

                    $.ajax({
                        url: "https://foodkakaapi.annamrajus.com/Redeem/Index?project_id=" + Project_Id + "&authorid=" + ProjectAuth,
                        type: "GET",
                        dataType: "JSON",
                        async: true,
                        crossDomain: true,
                        success: function (data) {
                            console.log(data);
                            $("#historm_tbl tbody").empty();
                            $.each(data, function (index, value) {

                                let newRow = '<tr><td>' + value.Amountpayable + '</td><td>' + value.Amountpaying + '</td><td>' + value.paymentmethod + '</td><td>' + value.transactionid + '</td><td>' + value.comment + '</td></tr>';
                                $("#historm_tbl tbody").append(newRow);
                            })

                        }
                    });
                })


            }



            $.ajax({
                url: "https://foodkakaapi.annamrajus.com/Customer/Count?project_id=" + Project_Id + "&authorid=" + ProjectAuth,
                type: "GET",
                dataType: "JSON",
                async: true,
                crossDomain: true,
                success: function (data) {
                    $("#customercount").text(data.count);

                }
            });


            $.ajax({
                url: "https://foodkakaapi.annamrajus.com/Order/totalprofit?project_id=" + Project_Id + "&authorid=" + ProjectAuth,
                type: "GET",
                dataType: "JSON",
                async: true,
                crossDomain: true,
                success: function (data) {

                    $("#totalProfit").text(data.ProfitAmount);
                    $("#totalgst").text(data.GSTAmount)

                }
            });


            $.ajax({
                url: "https://foodkakaapi.annamrajus.com/Order/Count?project_id=" + Project_Id + "&authorid=" + ProjectAuth,
                type: "GET",
                dataType: "JSON",
                async: true,
                crossDomain: true,
                success: function (data) {
                    $("#ordercount").text(data.count);

                }
            });

            $.ajax({
                url: "https://foodkakaapi.annamrajus.com/Order/Totalcount?project_id=" + Project_Id + "&authorid=" + ProjectAuth,
                type: "GET",
                dataType: "JSON",
                async: true,
                crossDomain: true,
                success: function (data) {
                    var ttlamtlll = parseInt(data);
                    $("#categorycount").text(ttlamtlll);


                }
            });

            $.ajax({
                url: " https://foodkakaapi.annamrajus.com/Product/Count?project_id=" + Project_Id + "&authorid=" + ProjectAuth,
                type: "GET",
                dataType: "JSON",
                async: true,
                crossDomain: true,
                success: function (data) {
                    $("#productcount").text(data.count);



                }
            });

            function formatDate(date) {
                var d = new Date(date),
                    month = '' + (d.getMonth() + 1),
                    day = '' + d.getDate(),
                    year = d.getFullYear();

                if (month.length < 2)
                    month = '0' + month;
                if (day.length < 2)
                    day = '0' + day;

                return [year, month, day].join('-');
            }
            var datenow = formatDate(new Date());
            $.ajax({
                url: "https://foodkakaapi.annamrajus.com/Order/Salereport",
                type: "POST",
                data: { "Project_Id": Project_Id, "todate": "2021-05-01", "authorid": ProjectAuth, "fromdate": datenow },
                dataType: "json",
                traditional: true,
                success: function (data) {
                    // getdatatable();

                },
                error: function (xhr) {
                    if (xhr.status === 401) {
                        window.location.href = "/Admin/Login.html";
                        return;
                    }
                }

            });

            $(".loading").hide();



            // ++++++++++++++++++++++++++++++++++++ FLITERS ++++++++++++++++++++++++++++++++++++++++++++++++++//
            $("#dateFilter").click(function () {
                $(".loading").show();

                var dataPointanswers = [];
                $("#chartContainer").CanvasJSChart().destroy();
                let fromdate, todate;
                fromdate = $("#fromDate").val();
                todate = $("#todate").val();
                $.ajax({
                    url: "https://foodkakaapi.annamrajus.com/Customer/Count?project_id=" + Project_Id + "&authorid=" + ProjectAuth + "&from=" + fromdate + "&to=" + todate,
                    type: "GET",
                    dataType: "JSON",
                    async: true,
                    crossDomain: true,
                    success: function (data) {
                        $("#customercount").text(data.count);

                    }
                });

                $.ajax({
                    url: "https://foodkakaapi.annamrajus.com/Order/totalprofit?project_id=" + Project_Id + "&authorid=" + ProjectAuth + "&from=" + fromdate + "&to=" + todate,
                    type: "GET",
                    dataType: "JSON",
                    async: true,
                    crossDomain: true,
                    success: function (data) {
                        console.log(data);
                        $("#totalProfit").text(data.ProfitAmount);
                        $("#totalgst").text(data.GSTAmount);
                    }
                });

                $.ajax({
                    url: "https://foodkakaapi.annamrajus.com/Order/Totalcount?project_id=" + Project_Id + "&authorid=" + ProjectAuth + "&from=" + fromdate + "&to=" + todate,
                    type: "GET",
                    dataType: "JSON",
                    async: true,
                    crossDomain: true,
                    success: function (data) {

                        $("#categorycount").text(data);

                    }
                });

                $.ajax({
                    url: "https://foodkakaapi.annamrajus.com/Order/Count?project_id=" + Project_Id + "&authorid=" + ProjectAuth + "&from=" + fromdate + "&to=" + todate,
                    type: "GET",
                    dataType: "JSON",
                    async: true,
                    crossDomain: true,
                    success: function (data) {
                        $("#ordercount").text(data.count);

                    }
                });

                $.ajax({
                    url: " https://foodkakaapi.annamrajus.com/Product/Count?project_id=" + Project_Id + "&authorid=" + ProjectAuth + "&from=" + fromdate + "&to=" + todate,
                    type: "GET",
                    dataType: "JSON",
                    async: true,
                    crossDomain: true,
                    success: function (data) {
                        $("#productcount").text(data.count);



                    }
                });


                $.ajax({
                    url: "https://foodkakaapi.annamrajus.com/Analytics/Employeedelivarycharges?project_id=" + Project_Id + "&authorid=" + ProjectAuth + "&from=" + fromdate + "&to=" + todate,
                    type: "GET",
                    dataType: "JSON",
                    async: true,
                    crossDomain: true,
                    success: function (data) {
                        $("#deliverycount").html(data);

                    }
                });


                $.ajax({
                    url: "https://foodkakaapi.annamrajus.com/Analytics/Employeegst?project_id=" + Project_Id + "&authorid=" + ProjectAuth + "&from=" + fromdate + "&to=" + todate,
                    type: "GET",
                    dataType: "JSON",
                    async: true,
                    crossDomain: true,
                    success: function (data) {
                        $("#GSTcount").html(data);

                    }
                });


                if (ProjectAuth == "3c53d65e-da3a-478a-a372-135a0caad4ff") {
                    $.ajax({
                        url: "https://foodkakaapi.annamrajus.com/Order/DaywiseAmount?project_id=" + Project_Id + "&from=" + fromdate + "&to=" + todate,
                        type: "GET",
                        dataType: "JSON",
                        async: false,
                        crossDomain: true,
                        success: function (data) {

                            //$("#chartContainer").CanvasJSChart().destroy();
                            for (var i = 0; i < data.length; i++) {
                                var nowDate = new Date(parseInt(data[i].createdon.substr(6)));
                                var result = "";
                                result = nowDate.toString("dd/mm/yyyy");
                                dataPointanswers.push({
                                    x: new Date(result),
                                    y: data[i].amount
                                });
                            }

                            var options = {
                                title: {
                                    text: "Spline Chart with Export as Image"
                                },
                                axisX: {
                                    labelFormatter: function (e) {
                                        return CanvasJS.formatDate(e.value, "DD MMM");
                                    },
                                },
                                animationEnabled: true,
                                exportEnabled: true,
                                data: [
                                    {
                                        type: "spline", //change it to line, area, column, pie, etc
                                        dataPoints: dataPointanswers
                                    }
                                ]
                            };
                            $("#chartContainer").CanvasJSChart(options);
                        }
                    });
                } else {

                    $.ajax({
                        url: "https://foodkakaapi.annamrajus.com/Order/DaywiseAmount?project_id=" + Project_Id + "&authorid=" + ProjectAuth + "&from=" + fromdate + "&to=" + todate,
                        type: "GET",
                        dataType: "JSON",
                        async: false,
                        crossDomain: true,
                        success: function (data) {
                            //$("#chartContainer").CanvasJSChart().destroy();
                            for (var i = 0; i < data.length; i++) {
                                var nowDate = new Date(parseInt(data[i].createdon.substr(6)));
                                var result = "";
                                result = nowDate.toString("dd/mm/yyyy");
                                dataPointanswers.push({
                                    x: new Date(result),
                                    y: data[i].amount
                                });
                            }
                            var options = {
                                title: {
                                    text: "Spline Chart with Export as Image"
                                },
                                axisX: {
                                    labelFormatter: function (e) {
                                        return CanvasJS.formatDate(e.value, "DD MMM");
                                    },
                                },
                                animationEnabled: true,
                                exportEnabled: true,
                                data: [
                                    {
                                        type: "spline", //change it to line, area, column, pie, etc
                                        dataPoints: dataPointanswers
                                    }
                                ]
                            };
                            $("#chartContainer").CanvasJSChart(options);
                        }
                    });
                }

                $(".loading").hide();
            })


        });
    </script>

</body>

</html>